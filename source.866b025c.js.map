{"version":3,"sources":["../node_modules/web-cell/source/utility/event.ts","data/config.ts","index.ts"],"names":[],"mappings":";AAyBO,aAnBD,SAAU,EACZ,EACA,GAEO,OAAA,SAAsB,GAIlB,IAHH,IAAA,EACA,EAAO,EAAM,gBAET,EAAO,EAAK,UAAY,IAAS,EAAM,eAC3C,GAAI,aAAgB,aAAe,EAAK,QAAQ,GAC5C,OAAO,EAAQ,KACX,KACA,EACA,EACC,EAAsB,SAKpC,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,SAAA,EAAA,QAAA,mBAAA,EAAA,IAAM,EAAgB,IAAI,QAAQ,SAAA,GACrC,SAAS,iBAAiB,mBAAoB,GAE9C,KAAK,iBAAiB,OAAQ,GAE9B,WAAW,SAAS,IACQ,aAAxB,SAAS,WAA4B,IAAY,WAAW,OAN7D,QAAA,cAAA;;ACUN,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,KAAA,EAAA,QAAA,QAAA,QAAA,YAAA,EAvBM,IAAM,EACX,aAAa,SACZ,aAAa,OAAS,KAAK,MAAM,KAAK,SAAW,KAAA,IAAA,EAAK,KAAI,SAAS,KAqBrE,QAAA,OAAA,EAnBM,IAAM,EAAU,uCAEjB,SAAU,EAAK,GAiBpB,IAAA,OAjBoB,IAAA,IAAA,EAAA,IACY,QAA/B,EAAA,SAAS,cAAc,gBAAQ,IAAA,GAAA,EAAE,SAE3B,IAAA,EAAS,SAAS,cAAc,UAE/B,OAAA,IAAI,QAAQ,SAAC,EAAS,GAC3B,EAAO,GAAK,OACZ,EAAO,OAAS,EAChB,EAAO,QAAU,EACjB,EAAO,IACL,IAAI,IACF,EACA,0EAA0E,EAAM,KAC9E,GAEN,SAAS,KAAK,OAAO,KAExB,QAAA,QAAA;;AC2CiC,aA9ElC,IAAA,EAAA,QAAA,iCAEA,EAAA,QAAA,iBA4EkC,EAAA,SAAA,GAAA,IAAA,EAAA,mBAAA,QAAA,OAAA,SAAA,EAAA,GAAA,EAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,EAAA,KAAA,GAAA,GAAA,GAAA,iBAAA,EAAA,OAAA,MAAA,CAAA,KAAA,WAAA,OAAA,GAAA,GAAA,EAAA,SAAA,OAAA,GAAA,CAAA,MAAA,GAAA,EAAA,KAAA,MAAA,KAAA,MAAA,IAAA,UAAA,EAAA,0BAAA,oCA1ElC,EAAc,cAAA,KAAK,WACX,IAAA,EAAiB,SAAS,cAC5B,oBAEF,EAAgB,SAAS,cACvB,mBAKJ,EAAc,QAAU,WAChB,IAAA,EAAW,EAAe,UAAU,SAAS,QAEnD,EAAc,aAAa,iBAAkB,EAAW,IACxD,EAAe,UAAU,OAAO,QAC3B,GAAU,EAAe,cAAc,SAG9C,EAAe,cAAc,OAAS,WACpC,OAAA,WAAW,WACT,EAAc,aAAa,gBAAiB,SAC5C,EAAe,UAAU,OAAO,SAC/B,MAIL,EAAe,iBACb,SACA,EAAS,EAAA,UAAA,YAAa,SAAC,EAAG,GACnB,EAAK,cAAc,KAAK,KAAK,WAAW,UAE7C,EACG,cAAc,oBACd,UAAU,OAAO,UACpB,EAAK,UAAU,IAAI,cAMjB,IAAA,EAAW,SAAS,iBAAiB,aAE3C,SAAS,cAAc,UAAU,OAAS,WAgCV,IAAA,EAAA,EA/B1B,IACI,IAAA,EAAS,OAAO,OAAO,GAAG,SAAQ,KACxC,MAAA,GACA,OA4B4B,IAzBuB,IAAA,IAAA,EAAA,EAAA,GAAQ,EAAA,EAAA,QAAA,EAAA,KAAA,EAAA,EAAA,OAAA,CAAlD,IAAA,EAAA,EAAA,MAAqB,EAAI,EAAA,kBAAW,EAAA,UACnC,OAAO,SAAW,EAA2B,OAAS,IAwBpC,MAAA,GAAA,EAAA,CAAA,MAAA,GAAA,QAAA,IAAA,IAAA,EAAA,OAAA,EAAA,EAAA,SAAA,EAAA,KAAA,GAAA,QAAA,GAAA,EAAA,MAAA,EAAA,SAnBhC,SACG,cAAiC,uBACjC,iBAAiB,QAAS,WACzB,OAAA,UAAU,MAAM,CACd,IAAK,KAAK,SAAS,KACnB,MAAO,SAAS,MAChB,KAAM,SAAS,cACb,4BACA,aAMR,EAAA,EAAA,UAKE,kBAAmB,WAAW,UAAU,cAAc,SAAS","file":"source.866b025c.js","sourceRoot":"../source","sourcesContent":["export type DelegateEventHandler<T = any> = (\n    event: Event,\n    currentTarget: Element,\n    detail?: T\n) => any;\n\nexport function delegate<T>(\n    selector: string,\n    handler: DelegateEventHandler<T>\n) {\n    return function (this: Node, event: Event) {\n        var node,\n            path = event.composedPath();\n\n        while ((node = path.shift()) && node !== event.currentTarget)\n            if (node instanceof HTMLElement && node.matches(selector))\n                return handler.call(\n                    this,\n                    event,\n                    node,\n                    (event as CustomEvent).detail\n                );\n    };\n}\n\nexport const documentReady = new Promise(resolve => {\n    document.addEventListener('DOMContentLoaded', resolve);\n\n    self.addEventListener('load', resolve);\n\n    setTimeout(function check() {\n        document.readyState === 'complete' ? resolve() : setTimeout(check);\n    });\n});\n","export interface Major {\n  college: string;\n  major: string;\n  batch: string;\n  division: string;\n  score: number;\n  position: number;\n  dimension?: string;\n  percent?: number;\n  [key: string]: any;\n}\n\nexport const userID =\n  localStorage.userID ||\n  (localStorage.userID = Math.round(Math.random() * 2 ** 48).toString(16));\n\nexport const baseURL = \"https://stone.sou.ac.cn/release/CEE/\";\n\nexport function ping(path = \"\") {\n  document.querySelector(\"#ping\")?.remove();\n\n  const script = document.createElement(\"script\");\n\n  return new Promise((resolve, reject) => {\n    script.id = \"ping\";\n    script.onload = resolve;\n    script.onerror = reject;\n    script.src =\n      new URL(\n        path,\n        `https://service-806yjs9u-1251042283.gz.apigw.tencentcs.com/release/log/${userID}/`\n      ) + \"\";\n\n    document.head.append(script);\n  });\n}\n","import { documentReady, delegate } from \"web-cell/source/utility/event\";\n\nimport { ping } from \"./data/config\";\n\ndocumentReady.then(() => {\n  const navbarCollapse = document.querySelector<HTMLDivElement>(\n      \".navbar-collapse\"\n    ),\n    navbarToggler = document.querySelector<HTMLButtonElement>(\n      \".navbar-toggler\"\n    );\n  /**\n   * 导航栏外部开合\n   */\n  navbarToggler.onclick = () => {\n    const expanded = navbarCollapse.classList.contains(\"show\");\n\n    navbarToggler.setAttribute(\"aria-expanded\", !expanded + \"\");\n    navbarCollapse.classList.toggle(\"show\");\n    if (!expanded) navbarCollapse.parentElement.focus();\n  };\n\n  navbarCollapse.parentElement.onblur = () =>\n    setTimeout(() => {\n      navbarToggler.setAttribute(\"aria-expanded\", \"false\");\n      navbarCollapse.classList.remove(\"show\");\n    }, 300);\n  /**\n   * 导航项目点击切换\n   */\n  navbarCollapse.addEventListener(\n    \"click\",\n    delegate(\".nav-item\", (_, item) => {\n      if (!item.querySelector(\"a\").href.startsWith(\"http\")) return;\n\n      navbarCollapse\n        .querySelector(\".nav-item.active\")\n        .classList.remove(\"active\");\n      item.classList.add(\"active\");\n    })\n  );\n  /**\n   * 导航项目加载切换\n   */\n  const navItems = document.querySelectorAll(\".nav-item\");\n\n  document.querySelector(\"iframe\").onload = () => {\n    try {\n      var { href } = window.frames[0].location;\n    } catch {\n      return;\n    }\n\n    for (const { firstElementChild: link, classList } of navItems)\n      classList.toggle(\"active\", (link as HTMLAnchorElement).href === href);\n  };\n  /**\n   * 打开系统分享功能\n   */\n  document\n    .querySelector<HTMLButtonElement>(\"button.share-button\")\n    .addEventListener(\"click\", () =>\n      navigator.share({\n        url: self.location.href,\n        title: document.title,\n        text: document.querySelector<HTMLMetaElement>(\n          'meta[name=\"description\"]'\n        ).content,\n      })\n    );\n  /**\n   * 访问统计\n   */\n  ping();\n});\n/**\n * 加载 PWA 后台线程\n */\nif (\"serviceWorker\" in navigator) navigator.serviceWorker.register(\"./sw.ts\");\n"]}